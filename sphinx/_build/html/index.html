
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyvalid’s documentation &#8212; pyvalid 1.0.4 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyvalid" href="modules.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="#">
          <span>pyvalid 1.0.4 documentation</span></a></h1>
        <h2 class="heading"><span>pyvalid’s documentation</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="modules.html">pyvalid</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="pyvalid-s-documentation">
<h1>pyvalid’s documentation<a class="headerlink" href="#pyvalid-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">pyvalid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.accepts">pyvalid.accepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.returns">pyvalid.returns</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.switch">pyvalid.switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.validators">pyvalid.validators</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.ArgumentValidationError">pyvalid.ArgumentValidationError</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.InvalidArgumentNumberError">pyvalid.InvalidArgumentNumberError</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#module-pyvalid.InvalidReturnTypeError">pyvalid.InvalidReturnTypeError</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="pyvalid">
<h2>pyvalid<a class="headerlink" href="#pyvalid" title="Permalink to this headline">¶</a></h2>
<img alt="https://img.shields.io/codecov/c/github/uzumaxy/pyvalid.svg?style=plastic" src="https://img.shields.io/codecov/c/github/uzumaxy/pyvalid.svg?style=plastic" />
<img alt="https://img.shields.io/github/workflow/status/uzumaxy/pyvalid/Python%20package?style=plastic" src="https://img.shields.io/github/workflow/status/uzumaxy/pyvalid/Python%20package?style=plastic" />
<p>The pyvalid is the Python validation tool for checking a function’s input
parameters and return values.</p>
<p>Purposes of the pyvalid package:</p>
<ol class="arabic simple">
<li><p>Provide an ability to validate a user input (such as usernames,
phone numbers, emails, dates and times, etc) and minimize the amount of
code required for the implementation of the comprehensive validation
systems;</p></li>
<li><p>Add an additional layer of dynamic code analysis for the development and
testing stages — pyvalid will raise the exception if a function accepts or
returns unexpected values and it’s always possible to disable pyvalid in
production if needed.</p></li>
<li><p>Help to catch runtime issues.</p></li>
</ol>
<div class="section" id="how-to-install">
<h3>How to install<a class="headerlink" href="#how-to-install" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>With PyPI: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">pyvalid</span></code></p></li>
<li><p>Manually: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code></p></li>
</ul>
</div>
<div class="section" id="how-to-use">
<h3>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h3>
<p>The schema below reveals the general structure of the <code class="docutils literal notranslate"><span class="pre">pyvalid</span></code> package:</p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/uzumaxy/pyvalid/master/docs/assets/pyvalid-map.png"><img alt="https://raw.githubusercontent.com/uzumaxy/pyvalid/master/docs/assets/pyvalid-map.png" src="https://raw.githubusercontent.com/uzumaxy/pyvalid/master/docs/assets/pyvalid-map.png" style="width: 600px;" /></a>
<p>The package consists of two decorators: <code class="docutils literal notranslate"><span class="pre">accepts</span></code> and <code class="docutils literal notranslate"><span class="pre">returns</span></code>, which
validates the function’s input and output values accordingly. To know how to
validate the data, <code class="docutils literal notranslate"><span class="pre">accepts</span></code> and <code class="docutils literal notranslate"><span class="pre">returns</span></code> decorators should receive the
information about excepted values/types/validators.</p>
<p>The very basic example below shows how to use <code class="docutils literal notranslate"><span class="pre">accepts</span></code> and <code class="docutils literal notranslate"><span class="pre">returns</span></code>
decorators.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">accepts</span><span class="p">,</span> <span class="n">returns</span>


<span class="nd">@accepts</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="nd">@returns</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">num_1</span><span class="p">,</span> <span class="n">num_2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">num_1</span> <span class="o">/</span> <span class="n">num_2</span>

<span class="n">divide</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="c1"># Returns float value</span>

<span class="n">divide</span><span class="p">(</span><span class="s1">&#39;Python&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="c1"># Raises the ArgumentValidationError exception, since the 1st argument is</span>
<span class="c1"># the str value, when we&#39;re expecting int values only.</span>
</pre></div>
</div>
<p>If just specifying an expected type or value is not enough, then it’s worth to
use the custom validator. All the built-in validators are located in the
<code class="docutils literal notranslate"><span class="pre">pyvalid.validators</span></code> module and it’s also possible to create a new one using
the <code class="docutils literal notranslate"><span class="pre">is_validator</span></code> decorator or through extending the <code class="docutils literal notranslate"><span class="pre">AbstractValidator</span></code>
class.</p>
<p>We can flexibly control the state of the <code class="docutils literal notranslate"><span class="pre">pyvalid</span></code> validation using the
<code class="docutils literal notranslate"><span class="pre">pyvalid.switch</span></code> module. This module provides an ability to switch the
<code class="docutils literal notranslate"><span class="pre">pyvalid</span></code> on/off.</p>
<p>In most cases, it’s worth to use the <code class="docutils literal notranslate"><span class="pre">pyvalid</span></code> features to validate
incoming/outcoming data, such as: user input, the data sent to the API, etc.</p>
<p>But it’s also possible to use the <code class="docutils literal notranslate"><span class="pre">pyvalid</span></code> package as a part of the CI/CD
processes only:</p>
<ol class="arabic simple">
<li><p>Apply the  <code class="docutils literal notranslate"><span class="pre">accepts</span></code> and <code class="docutils literal notranslate"><span class="pre">returns</span></code> decorators to all needed functions
and methods.</p></li>
<li><p>Perform unit testing, integration testing, etc.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">accepts</span></code> and <code class="docutils literal notranslate"><span class="pre">returns</span></code> decorators will raise exceptions in case if
the input/output data is not valid.</p></li>
<li><p>Collect information about raised exceptions and fix the code, which causes
them.</p></li>
<li><p>Turn off the <code class="docutils literal notranslate"><span class="pre">pyvalid</span></code> before going live in order to avoid unnecessary
exceptions in production.</p></li>
</ol>
</div>
</div>
<div class="section" id="pyvalid-accepts-allowed-arg-values-allowed-kwargs-values">
<h2><code class="docutils literal notranslate"><span class="pre">pyvalid.accepts(*allowed_arg_values,</span> <span class="pre">**allowed_kwargs_values)</span></code><a class="headerlink" href="#pyvalid-accepts-allowed-arg-values-allowed-kwargs-values" title="Permalink to this headline">¶</a></h2>
<p>The decorator which validates input parameters of the wrapped function.</p>
<p>To use it, we need to specify the list of allowed types or values. If the
function’s input doesn’t match the allowed types/values, one of the following
errors will be thrown:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pyvalid.ArgumentValidationError</span></code> — when the actual type/value of the
function’s argument is different from the expected one;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyvalid.InvalidArgumentNumberError</span></code> — when the number/position of
function’s arguments is incorrect.</p></li>
</ul>
<p>Examples of usage:</p>
<p>Let’s define the <code class="docutils literal notranslate"><span class="pre">multiply</span></code>, which accepts only <code class="docutils literal notranslate"><span class="pre">int</span></code> values, and see how
does it work with other types.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">accepts</span>


<span class="nd">@accepts</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">num_1</span><span class="p">,</span> <span class="n">num_2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num_1</span> <span class="o">*</span> <span class="n">num_2</span>


<span class="n">multiply</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># Returns 8.</span>

<span class="n">multiply</span><span class="p">(</span><span class="mf">3.14</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="c1"># Raises the ArgumentValidationError exception, since the 1st argument is</span>
<span class="c1"># the float value, when we&#39;re expecting int values only.</span>

<span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;pyvalid&#39;</span><span class="p">)</span>
<span class="c1"># Raises the ArgumentValidationError exception, since the 2nd argument is</span>
<span class="c1"># the str value, when we&#39;re expecting int values only.</span>

<span class="n">multiply</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
<span class="c1"># Raises the InvalidArgumentNumberError exception, since the second</span>
<span class="c1"># argument is missing.</span>
</pre></div>
</div>
</div>
<div class="section" id="pyvalid-returns-allowed-return-values">
<h2><code class="docutils literal notranslate"><span class="pre">pyvalid.returns(*allowed_return_values)</span></code><a class="headerlink" href="#pyvalid-returns-allowed-return-values" title="Permalink to this headline">¶</a></h2>
<p>The decorator which validates the value returned by the wrapped function.</p>
<p>To use it, we need to specify the list of expected return types or values.
If the function’s return value doesn’t match the allowed types/values, the
<code class="docutils literal notranslate"><span class="pre">pyvalid.InvalidReturnTypeError</span></code> error will be thrown.</p>
<p>Examples of usage:</p>
<p>Let’s define the <code class="docutils literal notranslate"><span class="pre">multiply</span></code>, which returns only <code class="docutils literal notranslate"><span class="pre">int</span></code> values, and see how
does it work with other types.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">returns</span>


<span class="nd">@returns</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">num_1</span><span class="p">,</span> <span class="n">num_2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num_1</span> <span class="o">*</span> <span class="n">num_2</span>


<span class="n">multiply</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># Returns 8.</span>

<span class="n">multiply</span><span class="p">(</span><span class="mf">3.14</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="c1"># Raises the InvalidReturnTypeError exception, since the function returns</span>
<span class="c1"># the float value, when we&#39;re expecting int values only.</span>

<span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;pyvalid&#39;</span><span class="p">)</span>
<span class="c1"># Raises the InvalidReturnTypeError exception, since the function returns</span>
<span class="c1"># the str value, when we&#39;re expecting int values only.</span>
</pre></div>
</div>
<div class="section" id="advanced-examples">
<h3>Advanced examples<a class="headerlink" href="#advanced-examples" title="Permalink to this headline">¶</a></h3>
<p>Function <code class="docutils literal notranslate"><span class="pre">calculate</span></code> in the example below has the following limitations:</p>
<ul class="simple">
<li><p>Function should return <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code> values only;</p></li>
<li><p>First parameter must be <code class="docutils literal notranslate"><span class="pre">str</span></code> value;</p></li>
<li><p>Second parameter must be <code class="docutils literal notranslate"><span class="pre">int</span></code> value or be equal to the <code class="docutils literal notranslate"><span class="pre">2.0</span></code>;</p></li>
<li><p>Third parameter must be <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code> value.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">accepts</span><span class="p">,</span> <span class="n">returns</span>


<span class="nd">@returns</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="nd">@accepts</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">,</span> <span class="n">val3</span><span class="p">):</span>
    <span class="n">expression</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{v1}</span><span class="s1"> </span><span class="si">{op}</span><span class="s1"> </span><span class="si">{v2}</span><span class="s1"> </span><span class="si">{op}</span><span class="s1"> </span><span class="si">{v3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">op</span><span class="o">=</span><span class="n">operator</span><span class="p">,</span>
        <span class="n">v1</span><span class="o">=</span><span class="n">val1</span><span class="p">,</span> <span class="n">v2</span><span class="o">=</span><span class="n">val2</span><span class="p">,</span> <span class="n">v3</span><span class="o">=</span><span class="n">val3</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>


<span class="n">calculate</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="c1"># Returns 24.</span>

<span class="n">calculate</span><span class="p">(</span><span class="n">operator</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">val1</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">val2</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">val3</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># Returns 24.0.</span>

<span class="n">calculate</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="c1"># Still returns 24.0.</span>

<span class="n">calculate</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="c1"># Raises the ArgumentValidationError exception, because the second</span>
<span class="c1"># argument is not valid.</span>

<span class="n">calculate</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;&quot;4&quot;&#39;</span><span class="p">)</span>
<span class="c1"># Raises the InvalidReturnTypeError exception, because of invalid return</span>
<span class="c1"># value: function returns the str value, when only int and float values</span>
<span class="c1"># are allowed.</span>
</pre></div>
</div>
<p>The example below demonstrates how to use the <code class="docutils literal notranslate"><span class="pre">accepts</span></code> and <code class="docutils literal notranslate"><span class="pre">returns</span></code>
decorators in the classes. Please pay attention to the method <code class="docutils literal notranslate"><span class="pre">connect</span></code> of
the class <code class="docutils literal notranslate"><span class="pre">SqlDriver</span></code>. In these classes we’re using the <code class="docutils literal notranslate"><span class="pre">accepts</span></code>
decorator to validate keyword arguments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">accepts</span><span class="p">,</span> <span class="n">returns</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>


<span class="k">class</span> <span class="nc">SqlDriver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="nd">@returns</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="nd">@accepts</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">usr</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">pwd</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">conn_req</span> <span class="o">=</span> <span class="s1">&#39;tsql -S </span><span class="si">{host}</span><span class="s1"> -p </span><span class="si">{port}</span><span class="s1"> -U </span><span class="si">{usr}</span><span class="s1"> -P </span><span class="si">{pwd}</span><span class="s1"> -D </span><span class="si">{db}</span><span class="s1">&#39;</span>
        <span class="n">conn_req</span> <span class="o">=</span> <span class="n">conn_req</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Establishing connection: &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">conn_req</span><span class="p">))</span>
            <span class="c1"># Some code, which may cause the ConnectionError</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@returns</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Closing connection&#39;</span><span class="p">)</span>
            <span class="c1"># Some code, which may cause the ConnectionError</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@returns</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="nd">@accepts</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">sql</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
            <span class="n">query_info</span> <span class="o">=</span> <span class="s1">&#39;Processing request &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">query_info</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="c1"># Some code, which may cause the ConnectionError</span>
        <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>


<span class="n">sql_driver</span> <span class="o">=</span> <span class="n">SqlDriver</span><span class="p">()</span>

<span class="n">conn_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;8.8.8.8&#39;</span><span class="p">,</span>
    <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">1433</span><span class="p">,</span>
    <span class="s1">&#39;usr&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pwd&#39;</span><span class="p">:</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span>
    <span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="s1">&#39;wiki&#39;</span>
<span class="p">}</span>
<span class="n">sql_driver</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">**</span><span class="n">conn_params</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s1">&#39;SELECT * FROM ProgrammingLang&#39;</span>
<span class="n">pl</span> <span class="o">=</span> <span class="n">sql_driver</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s1">&#39;SELECT * FROM ProgrammingLang WHERE name=</span><span class="si">{}</span><span class="s1">&#39;</span>
<span class="n">python_pl</span> <span class="o">=</span> <span class="n">sql_driver</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Python&#39;</span><span class="p">,))</span>

<span class="n">sql_driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>When we need a bit more complex validators, we may use built-in <code class="docutils literal notranslate"><span class="pre">pyvalid`</span>
<span class="pre">validators</span> <span class="pre">available</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">``pyvalid.validators</span></code> module.
For example, here we’re using the <code class="docutils literal notranslate"><span class="pre">StringValidator</span></code> validator based on the
regular expression and the <code class="docutils literal notranslate"><span class="pre">NumberValidator</span></code> based on the min/max allowed
values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">accepts</span><span class="p">,</span> <span class="n">returns</span>
<span class="kn">from</span> <span class="nn">pyvalid.validators</span> <span class="kn">import</span> <span class="n">NumberValidator</span><span class="p">,</span> <span class="n">StringValidator</span>

<span class="nd">@accepts</span><span class="p">(</span><span class="n">StringValidator</span><span class="p">(</span><span class="n">re_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^[A-Za-z]+\s?[A-Za-z]+\s?[A-Za-z]+$&#39;</span><span class="p">))</span>
<span class="nd">@returns</span><span class="p">(</span><span class="n">NumberValidator</span><span class="p">(</span><span class="n">min_val</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_val</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">get_review</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Hello, </span><span class="si">{}</span><span class="s1">! Please review our application from 0 to 10.&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>

<span class="n">review</span> <span class="o">=</span> <span class="n">get_review</span><span class="p">(</span><span class="s1">&#39;Elon Musk&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">review</span><span class="p">)</span>
<span class="c1"># Will raise the InvalidReturnTypeError exception only if user enter</span>
<span class="c1"># the value, which is not in the [0, 10] range.</span>

<span class="n">another_review</span> <span class="o">=</span> <span class="n">get_review</span><span class="p">(</span><span class="s1">&#39;Elon Musk 2&#39;</span><span class="p">)</span>
<span class="c1"># Raises the ArgumentValidationError exception, since the &quot;Elon Musk 2&quot;</span>
<span class="c1"># value doesn&#39;t match the pattern.</span>
</pre></div>
</div>
<p>The example below explains how to use the custom validator. It’s pretty
easy actually, we just need to apply the <code class="docutils literal notranslate"><span class="pre">pyvalid.validators.is_validator</span></code>
decorator to the validation function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyvalid</span> <span class="kn">import</span> <span class="n">accepts</span>
<span class="kn">from</span> <span class="nn">pyvalid.validators</span> <span class="kn">import</span> <span class="n">is_validator</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">registered_users</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Validator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

        <span class="n">unsafe_passwords</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;111111&#39;</span><span class="p">,</span> <span class="s1">&#39;000000&#39;</span><span class="p">,</span> <span class="s1">&#39;123123&#39;</span><span class="p">,</span>
            <span class="s1">&#39;123456&#39;</span><span class="p">,</span> <span class="s1">&#39;12345678&#39;</span><span class="p">,</span> <span class="s1">&#39;1234567890&#39;</span><span class="p">,</span>
            <span class="s1">&#39;qwerty&#39;</span><span class="p">,</span> <span class="s1">&#39;sunshine&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="nd">@classmethod</span>
        <span class="nd">@is_validator</span>
        <span class="k">def</span> <span class="nf">login_checker</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">login</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">login</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">login</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">16</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">reg_user</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">registered_users</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">login</span> <span class="o">==</span> <span class="n">reg_user</span><span class="o">.</span><span class="n">login</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="nd">@classmethod</span>
        <span class="nd">@is_validator</span>
        <span class="k">def</span> <span class="nf">password_checker</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                <span class="ow">and</span>
                <span class="mi">6</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">32</span>
                <span class="ow">and</span>
                <span class="n">password</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">unsafe_passwords</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">login</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__login</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">login</span> <span class="o">=</span> <span class="n">login</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__password</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="n">User</span><span class="o">.</span><span class="n">registered_users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__login</span>

    <span class="nd">@login</span><span class="o">.</span><span class="n">setter</span>
    <span class="nd">@accepts</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">Validator</span><span class="o">.</span><span class="n">login_checker</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__login</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__password</span>

    <span class="nd">@password</span><span class="o">.</span><span class="n">setter</span>
    <span class="nd">@accepts</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">Validator</span><span class="o">.</span><span class="n">password_checker</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__password</span> <span class="o">=</span> <span class="n">value</span>


<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;Str0ng_P@ssw0rd!&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="c1"># Outputs: &quot;admin Str0ng_P@ssw0rd!&quot;</span>

<span class="n">user</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;qwerty&#39;</span>
<span class="c1"># Raises the ArgumentValidationError exception, because the</span>
<span class="c1"># User.Validator.password_checker method returns False.</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;An0ther_Str0ng_P@ssw0rd!&#39;</span><span class="p">)</span>
<span class="c1"># Raises the ArgumentValidationError exception, because the</span>
<span class="c1"># User.Validator.login_checker method returns False.</span>
</pre></div>
</div>
</div>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Note that this project is distributed under the <a class="reference external" href="LICENSE">MIT License</a>.</p>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="modules.html">pyvalid</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Max Hryshchuk.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>